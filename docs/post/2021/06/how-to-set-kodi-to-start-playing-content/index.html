<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>How to Set Kodi to Start Playing Content :: LTAN.ME</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="我是如何在coreelec系统设置开机自动播放视频列表的 手里空闲N1盒子一台，刷了coreelec 系统，本质为kodi播放器，起初想配合小米智能插座 &#43; n1盒子&#43;显示器&#43;音箱 打造一台家用融媒体diy宣传" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://ltan.me/post/2021/06/how-to-set-kodi-to-start-playing-content/" />




<link rel="stylesheet" href="https://ltan.me/assets/style.css">

  <link rel="stylesheet" href="https://ltan.me/assets/pink.css">






<link rel="apple-touch-icon" href="https://ltan.me/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://ltan.me/img/favicon/pink.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="How to Set Kodi to Start Playing Content">
<meta property="og:description" content="我是如何在coreelec系统设置开机自动播放视频列表的 手里空闲N1盒子一台，刷了coreelec 系统，本质为kodi播放器，起初想配合小米智能插座 &#43; n1盒子&#43;显示器&#43;音箱 打造一台家用融媒体diy宣传" />
<meta property="og:url" content="https://ltan.me/post/2021/06/how-to-set-kodi-to-start-playing-content/" />
<meta property="og:site_name" content="LTAN.ME" />

  
    <meta property="og:image" content="https://ltan.me/img/favicon/pink.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-06-13 07:09:39 &#43;0800 CST" />












</head>
<body class="pink">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    LTAN.ME
  </div>
</a>

    </div>
    
    <div class="menu-trigger">menu</div>
    
  </div>
  
  <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/">Home</a></li>
        
      
        
          <li><a href="/post/">Archives</a></li>
        
      
        
          <li><a href="/tags/">Tags</a></li>
        
      
        
          <li><a href="/about/">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/">Home</a></li>
      
    
      
        <li><a href="/post/">Archives</a></li>
      
    
      
        <li><a href="/tags/">Tags</a></li>
      
    
      
        <li><a href="/about/">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://ltan.me/post/2021/06/how-to-set-kodi-to-start-playing-content/">How to Set Kodi to Start Playing Content</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2021-06-13 [Mod: 2021-06-13]
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://ltan.me/tags/kodi/">kodi</a>&nbsp;
    
    #<a href="https://ltan.me/tags/coreelec/">coreelec</a>&nbsp;
    
    #<a href="https://ltan.me/tags/n1/">N1</a>&nbsp;
    
    #<a href="https://ltan.me/tags/m3u/">m3u</a>&nbsp;
    
    #<a href="https://ltan.me/tags/m3u8/">m3u8</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="我是如何在coreelec系统设置开机自动播放视频列表的"><strong>我是如何在coreelec系统设置开机自动播放视频列表的</strong><a href="#我是如何在coreelec系统设置开机自动播放视频列表的" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<blockquote>
<p>手里空闲N1盒子一台，刷了coreelec 系统，本质为kodi播放器，起初想配合小米智能插座 + n1盒子+显示器+音箱</p>
<p>打造一台家用融媒体diy宣传广告机,设置定时开关机，定时播放指定内容，比如每天早上播放《三字经》《刷牙》，每天中午播放《交通安全》，晚上播放《护眼宣导片》</p>
<p>等三个.mp4文件。于是翻了一下kodi技术开发论坛，就有了以下成果</p>
</blockquote>
<p>原论坛：https://forum.kodi.tv/showthread.php?tid=157120</p>
<p>解决方法：</p>
<p>​     用electerm ssh管理软件登录到kodi 系统，在/storage/.kodi/userdata/ 目录下 创建 autoexec.py 文件 ，输入代码如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> xbmc 
xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayMedia(/storage/ad/test.m3u)&#34;</span>)
xbmc<span style="color:#f92672">.</span>executebuiltin( <span style="color:#e6db74">&#34;XBMC.SetVolume(</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">)&#34;</span> <span style="color:#f92672">%</span> (<span style="color:#ae81ff">56</span>)) <span style="color:#75715e"># 设置音量，这个很有用，比如早上闹钟模式可以设置大一点，晚上睡觉前可以小一点声音，这里的脚本是在nas 群晖系统自动生成，采用定时任务生成的，然后在kodi设备做了开机启动挂载nfs共享实现的</span>

</code></pre></div><p>test.m3u我这里只是测试音视频列表，你可以用nas nfs 接入就可以，做一个软链接即可读取</p>
<p>test.m3u为播放列表，该文件是生成的，生成工具在这里，也可以制混合m3u播放列表，包含本地播放，在线链接播放</p>
<p><a href="https://github.com/Isayso/PlaylistEditorTV">Isayso/PlaylistEditorTV: IPTV m3u list Editor/Player for Windows with Kodi support (github.com)</a></p>
<p><img src="image-20210613072200142.png" alt="image-20210613072200142"></p>
<p>设备实际播放效果图：</p>
<p><img src="image-20210613072552887.png" alt="image-20210613072552887"></p>
<h3 id="最后推荐一款-快控-app-非常好用配合ddnsto远程控制相当完美">最后推荐一款 <code>快控</code> APP 非常好用，配合ddnsto远程控制相当完美<a href="#最后推荐一款-快控-app-非常好用配合ddnsto远程控制相当完美" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th><img src="image-20210615162652341.png" alt="image-20210615162652341"></th>
<th><img src="image-20210615162617390.png" alt="image-20210615162617390"></th>
</tr>
</thead>
</table>
<h1 id="注意事项总结">注意事项总结<a href="#注意事项总结" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>本场景需求是：让n1 kodi 设备 音视频播放器，开机自动播放，并根据早，中，晚，周末，节假日特证来设置不同播放内容，内容可以是</p>
<p>网络采集的在线视频，在线新闻，音乐，Youtube频道自动播放等等，诸如此类，</p>
<p>需要注意以下几点：</p>
<p>1，通过小米智能插座，控制开关机时段，比如早上时间段为6：00 ~ 8：00， 中午时间段11：00 ~ 14：00 ， 晚上时间段：17：30 ~ 21：00</p>
<p>2，内容通过群晖计划任务，定时生成播放计划脚本，以及播放内容</p>
<p>3，播放列表根据自己喜好，分类制作不同的分类播放列表</p>
<p>​      如国学单独一个播放列表，流行music一个播放列表，背景音乐，睡前音乐等等</p>
<p>播放列表是自己生成的播放列表.m3u格式如下文件</p>
<pre><code class="language-m3u" data-lang="m3u">#EXTCPlayListM3U::M3U
#EXTINF:0,高枫 - 大中国
/storage/recordings/mp3/高枫 - 大中国.mp3
#EXTINF:0,下山
/storage/recordings/01.下山.flac
</code></pre><p>开机自动播放脚本存储位置 <code>/storage/.kodi/userdata/autoexec.py</code>  代码内容如下，根据自身需求定制</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> xbmc
<span style="color:#f92672">import</span> datetime

today <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>date<span style="color:#f92672">.</span>today()
d <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>now()
now <span style="color:#f92672">=</span> today<span style="color:#f92672">.</span>day
dayOfWeek <span style="color:#f92672">=</span> int(d<span style="color:#f92672">.</span>weekday())
cur_hour <span style="color:#f92672">=</span> int(getattr(d, <span style="color:#e6db74">&#39;hour&#39;</span>))
cur_minute <span style="color:#f92672">=</span> int(getattr(d, <span style="color:#e6db74">&#39;minute&#39;</span>))

<span style="color:#66d9ef">if</span>(dayOfWeek<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">and</span> dayOfWeek <span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">5</span>):
	<span style="color:#66d9ef">if</span>(cur_hour <span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">7</span> <span style="color:#f92672">and</span> cur_hour <span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">8</span> <span style="color:#f92672">and</span> cur_minute <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">25</span> <span style="color:#f92672">and</span> cur_minute <span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">59</span>):
		xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayMedia(/storage/ad/go2school.m3u)&#34;</span>)
		xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;XBMC.SetVolume(</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">)&#34;</span> <span style="color:#f92672">%</span> (<span style="color:#ae81ff">80</span>))
		xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayerControl(repeatall)&#34;</span>)
	<span style="color:#66d9ef">if</span>(cur_hour <span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">14</span> <span style="color:#f92672">and</span> cur_hour <span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">22</span>):
		xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayMedia(/storage/ad/bj.m3u)&#34;</span>)
		xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;XBMC.SetVolume(</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">)&#34;</span> <span style="color:#f92672">%</span> (<span style="color:#ae81ff">75</span>))
		xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayerControl(repeatall)&#34;</span>)
<span style="color:#66d9ef">else</span>:
	xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayMedia(/storage/ad/playlist.m3u)&#34;</span>)
	xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;XBMC.SetVolume(</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">)&#34;</span> <span style="color:#f92672">%</span> (<span style="color:#ae81ff">48</span>))
	xbmc<span style="color:#f92672">.</span>executebuiltin(<span style="color:#e6db74">&#34;PlayerControl(repeatoff)&#34;</span>)

</code></pre></div><p>其播放计划脚本为autoexec.py 脚本 需要根据不同日期判断音量，不同时间段判断播放内容</p>
<p>m3u 文件格式制作请参考文档：<a href="https://en.wikipedia.org/wiki/M3U">M3U - Wikipedia</a></p>

      </div></div>

  

  


<script src="https://utteranc.es/client.js"
        repo="ltanme/ltanme.github.io"
        issue-term="pathname"
        theme="github-dark-orange"
        crossorigin="anonymous"
        async>
</script>

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ltan.me/assets/main.js"></script>
<script src="https://ltan.me/assets/prism.js"></script>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-M6YN54PT6M"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-M6YN54PT6M');
</script>

  
</div>

</body>
</html>
