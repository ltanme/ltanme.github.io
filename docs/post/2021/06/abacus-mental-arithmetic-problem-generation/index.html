<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Abacus Mental Arithmetic Problem Generation :: LTAN.ME</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="珠心算二笔、三笔、五笔、十笔一位加减混合计算题自动生成 珠算是以算盘为工具，数学理论为基础，运用手指拨珠，进行运算的一门计算技术，它是我国古代劳动人民重要的发明创造之一，千百年来这一技术不断扩散，传播到" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://ltan.me/post/2021/06/abacus-mental-arithmetic-problem-generation/" />




<link rel="stylesheet" href="https://ltan.me/assets/style.css">






<link rel="apple-touch-icon" href="https://ltan.me/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://ltan.me/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Abacus Mental Arithmetic Problem Generation">
<meta property="og:description" content="珠心算二笔、三笔、五笔、十笔一位加减混合计算题自动生成 珠算是以算盘为工具，数学理论为基础，运用手指拨珠，进行运算的一门计算技术，它是我国古代劳动人民重要的发明创造之一，千百年来这一技术不断扩散，传播到" />
<meta property="og:url" content="https://ltan.me/post/2021/06/abacus-mental-arithmetic-problem-generation/" />
<meta property="og:site_name" content="LTAN.ME" />

  
    <meta property="og:image" content="https://ltan.me/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-06-01 09:33:32 &#43;0800 CST" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    LTAN.ME
  </div>
</a>

    </div>
    
    <div class="menu-trigger">menu</div>
    
  </div>
  
  <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/">Home</a></li>
        
      
        
          <li><a href="/post/">Archives</a></li>
        
      
        
          <li><a href="/tags/">Tags</a></li>
        
      
        
          <li><a href="/about/">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/">Home</a></li>
      
    
      
        <li><a href="/post/">Archives</a></li>
      
    
      
        <li><a href="/tags/">Tags</a></li>
      
    
      
        <li><a href="/about/">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://ltan.me/post/2021/06/abacus-mental-arithmetic-problem-generation/">Abacus Mental Arithmetic Problem Generation</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2021-06-01 [Mod: 2021-06-01]
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://ltan.me/tags/recursive/">recursive</a>&nbsp;
    
    #<a href="https://ltan.me/tags/python2.7/">python2.7</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="珠心算二笔三笔五笔十笔一位加减混合计算题自动生成">珠心算二笔、三笔、五笔、十笔一位加减混合计算题自动生成<a href="#珠心算二笔三笔五笔十笔一位加减混合计算题自动生成" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<blockquote>
<p>珠算是以算盘为工具，数学理论为基础，运用手指拨珠，进行运算的一门计算技术，它是我国古代劳动人民重要的发明创造之一，千百年来这一技术不断扩散，传播到世界各国，推进着人类文明的发展历程。</p>
<p>珠心算只有三个符号即1、5和0;数学有10个符号，即0、1、2、3、4、5、6、7、8、9。可见珠心算运算的简捷性。珠心算的直观模型作用能培养小孩子的数学概念能力，珠心算的分析模型作用能帮助小孩子理解应用题的结构关系和数量关系，提高解题能力。</p>
</blockquote>
<p><img src="./zhuxinsuanpang.jpg" alt="珠心算盘"></p>
<blockquote>
<p>这几天看到娃娘，在用办公软件excel 给5岁娃出题，一页一页的打印出来, 很费劲</p>
<p>我说这个可以写个程序自动生成出来，更快。不用这么幸苦</p>
<p>开始我不太了解珠心算的规则，后面翻了资料，还真不是随便10以内的加减组合。有一定的规则，如上文章开头所描述</p>
<h3 id="出题要求规则如下">出题要求规则如下:<a href="#出题要求规则如下" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>加法<br>
<code>1</code>可以加<code>1</code>，<code>2</code>，<code>3</code>，<code>5</code>，<code>6</code>，<code>7</code>，<code>8</code><br>
<code>2</code>可以加<code>2</code>，<code>5</code>，<code>6</code>，<code>7</code><br>
<code>3</code>可以加<code>1</code>，<code>5</code>，<code>6</code><br>
<code>4</code>可以加<code>5</code><br>
<code>5</code>可以加<code>4</code><br>
<code>6</code>可以加<code>1</code>，<code>2</code>，<code>3</code><br>
<code>7</code>可以加<code>1</code>，<code>2</code><br>
<code>8</code>可以加<code>1</code><br>
减法<br>
<code>9</code>可以减<code>1</code>，<code>2</code>，<code>3</code>，<code>4</code>，<code>5</code>，<code>6</code>，<code>7</code>，<code>8</code>，<code>9</code><br>
<code>8</code>可以减<code>1</code>，<code>2</code>，<code>3</code>，<code>5</code>，<code>6</code>，<code>7</code>，<code>8</code><br>
<code>7</code>可以减<code>1</code>，<code>2</code>，<code>5</code>，<code>6</code>，<code>7</code><br>
<code>6</code>可以减<code>1</code>，<code>5</code>，<code>6</code><br>
<code>5</code>可以减<code>5</code><br>
<code>4</code>可以减<code>1</code>，<code>2</code>，<code>3</code>，<code>4</code><br>
<code>3</code>可以减<code>1</code>，<code>2</code>，<code>3</code><br>
<code>2</code>可以减<code>1</code>，<code>2</code><br>
<code>1</code>可以减<code>1</code><br>
<code>1-9</code>都可以加减<code>0</code></p>
<p>出<code>五笔</code>到<code>十笔</code>的题</p>
<p>要求计算结果不能是负数，结果不能大于10</p>
</blockquote>
<h3 id="于是就有以下代码">于是就有以下代码<a href="#于是就有以下代码" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># -*- coding=utf-8 -*-</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> random
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> datetime
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> openpyxl <span style="color:#f92672">import</span> Workbook
</span></span><span style="display:flex;"><span>wb <span style="color:#f92672">=</span> Workbook()
</span></span><span style="display:flex;"><span>ws <span style="color:#f92672">=</span> wb<span style="color:#f92672">.</span>active
</span></span><span style="display:flex;"><span>reload(sys)
</span></span><span style="display:flex;"><span>sys<span style="color:#f92672">.</span>setdefaultencoding(<span style="color:#e6db74">&#39;utf8&#39;</span>)
</span></span><span style="display:flex;"><span>var <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add1&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add2&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add3&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add4&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add5&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add6&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add7&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add8&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add9&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;add0&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub9&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">9</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub8&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub7&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub6&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub5&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub4&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub3&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub2&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub1&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>var[<span style="color:#e6db74">&#34;sub0&#34;</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>sa <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;1&#34;</span>:<span style="color:#e6db74">&#34;-&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;2&#34;</span>:<span style="color:#e6db74">&#34;+&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getNum</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> random<span style="color:#f92672">.</span>randrange(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getU</span>(f):
</span></span><span style="display:flex;"><span>    u <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>randrange(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> f<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">9</span>:
</span></span><span style="display:flex;"><span>        f <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>randrange(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (u <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;+&#34;</span>,var[<span style="color:#e6db74">&#34;add</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> f]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;-&#34;</span>, var[<span style="color:#e6db74">&#34;sub</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> f]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getV</span>(a):
</span></span><span style="display:flex;"><span>    al <span style="color:#f92672">=</span> len(a)
</span></span><span style="display:flex;"><span>    qz <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (al <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        qz <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>randrange(<span style="color:#ae81ff">1</span>, al)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> qz
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getRes</span>(a,b,u):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(u<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;+&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span>b
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a<span style="color:#f92672">-</span>b
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">recursive_formula</span>(num,count,arr):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(arr)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>      arr<span style="color:#f92672">.</span>append(str(num))
</span></span><span style="display:flex;"><span>    u1, a <span style="color:#f92672">=</span> getU(num)
</span></span><span style="display:flex;"><span>    count <span style="color:#f92672">=</span> count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> count<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        v <span style="color:#f92672">=</span> a[getV(a)]
</span></span><span style="display:flex;"><span>        arr<span style="color:#f92672">.</span>append(str(u1))
</span></span><span style="display:flex;"><span>        arr<span style="color:#f92672">.</span>append(str(v))
</span></span><span style="display:flex;"><span>        r <span style="color:#f92672">=</span> getRes(num,v,u1)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> recursive_formula(r, count, arr)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> arr 
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>cell <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>  <span style="color:#75715e">#生成excel 4列表格</span>
</span></span><span style="display:flex;"><span>total <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span> <span style="color:#75715e">#生成100题</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">=</span> recursive_formula(getNum(), <span style="color:#ae81ff">5</span>, [])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(data)<span style="color:#f92672">&gt;=</span>total:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> a:
</span></span><span style="display:flex;"><span>        data<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">.</span>join(a) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;=&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print <span style="color:#e6db74">&#34;共</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">题&#34;</span> <span style="color:#f92672">%</span> len(data)
</span></span><span style="display:flex;"><span>rows <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> data:
</span></span><span style="display:flex;"><span>    rows<span style="color:#f92672">.</span>append(item)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(rows)<span style="color:#f92672">==</span>cell:
</span></span><span style="display:flex;"><span>        ws<span style="color:#f92672">.</span>append(rows)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">del</span> rows[:]
</span></span><span style="display:flex;"><span>version <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>now()<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#39;%Y%m</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">%H%M%S&#39;</span>)
</span></span><span style="display:flex;"><span>wb<span style="color:#f92672">.</span>save(<span style="color:#e6db74">&#34;珠心算题目生成-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">-</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">.xlsx&#34;</span> <span style="color:#f92672">%</span> (cell,len(data),version))
</span></span><span style="display:flex;"><span>wb<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><p>最终生成效果如下，请自行调整打印格式</p>
<p><img src="image-20210601102211603.png" alt="image-20210601102211603"></p>

      </div></div>

  

  


<script src="https://utteranc.es/client.js"
        repo="ltanme/ltanme.github.io"
        issue-term="pathname"
        theme="github-dark-orange"
        crossorigin="anonymous"
        async>
</script>

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2023 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ltan.me/assets/main.js"></script>
<script src="https://ltan.me/assets/prism.js"></script>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-M6YN54PT6M"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-M6YN54PT6M');
</script>

  
</div>

</body>
</html>
