<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>How to Enable Activemq Artemis Rest Api :: LTAN.ME</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="如何启用activemq artemis rest api 特性 在一次项目中需要使用activemq artemis mqtt 协议通信特性，需要借助rest api 功能按clientId 查询是否在线，也就是如何通过client id 查询 设备是否在线需要借助res" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://ltan.me/post/2021/08/how-to-enable-activemq-artemis-rest-api/" />




<link rel="stylesheet" href="https://ltan.me/assets/style.css">






<link rel="apple-touch-icon" href="https://ltan.me/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://ltan.me/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="How to Enable Activemq Artemis Rest Api">
<meta property="og:description" content="如何启用activemq artemis rest api 特性 在一次项目中需要使用activemq artemis mqtt 协议通信特性，需要借助rest api 功能按clientId 查询是否在线，也就是如何通过client id 查询 设备是否在线需要借助res" />
<meta property="og:url" content="https://ltan.me/post/2021/08/how-to-enable-activemq-artemis-rest-api/" />
<meta property="og:site_name" content="LTAN.ME" />

  
    <meta property="og:image" content="https://ltan.me/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-08-31 19:35:49 &#43;0800 CST" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    LTAN.ME
  </div>
</a>

    </div>
    
    <div class="menu-trigger">menu</div>
    
  </div>
  
  <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/">Home</a></li>
        
      
        
          <li><a href="/post/">Archives</a></li>
        
      
        
          <li><a href="/tags/">Tags</a></li>
        
      
        
          <li><a href="/about/">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/">Home</a></li>
      
    
      
        <li><a href="/post/">Archives</a></li>
      
    
      
        <li><a href="/tags/">Tags</a></li>
      
    
      
        <li><a href="/about/">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://ltan.me/post/2021/08/how-to-enable-activemq-artemis-rest-api/">How to Enable Activemq Artemis Rest Api</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2021-08-31 [Mod: 2021-08-31]
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://ltan.me/tags/activemq-artemis/">activemq artemis</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="如何启用activemq-artemis-rest-api-特性">如何启用activemq artemis rest api 特性<a href="#如何启用activemq-artemis-rest-api-特性" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<blockquote>
<p>在一次项目中需要使用activemq artemis mqtt 协议通信特性，需要借助rest api 功能按clientId 查询是否在线，也就是如何通过client id 查询 设备是否在线需要借助rest api 特性，默认情况artemis 不提供rest api 特性，在网搜索了一了，再借助官网的文档，需要build 一个war包 放 到web目录下即可，然后 重启程序</p>
<p>但 在build 过程不是顺利，记录一下报错处理方法</p>
</blockquote>
<p>github 提供的源代码，需要<code>build</code> ,即 <code>mvn package</code></p>
<p><a href="https://github.com/jirkadanek/artemis-rest">jirkadanek/artemis-rest: Give your ActiveMQ Artemis Message Broker a REST interface (github.com)</a></p>
<p>官网提供的文档，如何开启rest api 特性</p>
<p><a href="https://activemq.apache.org/components/artemis/documentation/latest/rest.html">REST Interface · ActiveMQ Artemis Documentation (apache.org)</a></p>
<p>stackoverflow  提供的类似的问答 参考  配置参考</p>
<p><a href="https://stackoverflow.com/questions/59319707/artemis-rest-interface">java - Artemis rest interface - Stack Overflow</a></p>
<p><a href="https://stackoverflow.com/questions/63668418/rest-interface-on-activemq-artemis">maven - REST interface on ActiveMQ Artemis - Stack Overflow</a></p>
<blockquote>
<p>在集群模式下，如何开集，<code>master/salver</code></p>
</blockquote>
<p><a href="https://stackoverflow.com/questions/59847221/how-to-enable-rest-in-an-activemq-artemis-cluster">java - How to enable REST in an ActiveMQ Artemis cluster - Stack Overflow</a></p>
<blockquote>
<p>build 报错如下</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">[</span>ERROR<span style="color:#f92672">]</span> Failed to execute goal on project artemis<span style="color:#f92672">-</span>rest<span style="color:#f92672">-</span>embedded<span style="color:#f92672">:</span> Could not resolve dependencies <span style="color:#66d9ef">for</span> project com<span style="color:#f92672">.</span><span style="color:#a6e22e">github</span><span style="color:#f92672">.</span><span style="color:#a6e22e">jdanekrh</span><span style="color:#f92672">:</span>artemis<span style="color:#f92672">-</span>rest<span style="color:#f92672">-</span>embedded<span style="color:#f92672">:</span>war<span style="color:#f92672">:</span>1<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">-</span>SNAPSHOT<span style="color:#f92672">:</span> Failure to find o
rg<span style="color:#f92672">.</span><span style="color:#a6e22e">apache</span><span style="color:#f92672">.</span><span style="color:#a6e22e">activemq</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rest</span><span style="color:#f92672">:</span>artemis<span style="color:#f92672">-</span>rest<span style="color:#f92672">:</span>jar<span style="color:#f92672">:</span>2<span style="color:#f92672">.</span><span style="color:#a6e22e">18</span><span style="color:#f92672">.</span><span style="color:#a6e22e">0</span> in http<span style="color:#f92672">:</span><span style="color:#75715e">//maven.aliyun.com/nexus/content/repositories/central/ was cached in the local repository, resolution will not be reattempted unt
</span><span style="color:#75715e"></span>il the update interval of alimaven has elapsed or updates are forced <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">[</span>Help 1<span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ERROR<span style="color:#f92672">]</span>
</code></pre></div><blockquote>
<p>解决方法，根据上述报错，原因为找不到<code>artemis-rest:jar:2.18.0</code>  其 版本为 2.18.0 但是pom.xml 里面写的RELEASE, why?</p>
<p>这里我就把改成对应版本，版本从maven 中央仓库得到最新版本</p>
</blockquote>
<blockquote>
<p>再执行以下命令</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn install clean -U
</code></pre></div><blockquote>
<p>然后再执行以下命令，就是打包了</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn package
</code></pre></div><p><img src="image-20210831195034813.png" alt="image-20210831195034813"></p>
<blockquote>
<p>将得到的war包放到web目录下,记得一定要重命名 <code>activemq-rest.war</code></p>
</blockquote>
<p><img src="image-20210831195919395.png" alt="image-20210831195919395"></p>
<p>还有最关键一步如下，就是在etc目录下的bootstrap.xml 文件位置，添加 你需要启动的war包</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">   <span style="color:#75715e">&lt;!-- The web server is only bound to localhost by default --&gt;</span>
   <span style="color:#f92672">&lt;web</span> <span style="color:#a6e22e">bind=</span><span style="color:#e6db74">&#34;http://localhost:8161&#34;</span> <span style="color:#a6e22e">path=</span><span style="color:#e6db74">&#34;web&#34;</span><span style="color:#f92672">&gt;</span>
       <span style="color:#f92672">&lt;app</span> <span style="color:#a6e22e">url=</span><span style="color:#e6db74">&#34;activemq-branding&#34;</span> <span style="color:#a6e22e">war=</span><span style="color:#e6db74">&#34;activemq-branding.war&#34;</span><span style="color:#f92672">/&gt;</span>
       <span style="color:#f92672">&lt;app</span> <span style="color:#a6e22e">url=</span><span style="color:#e6db74">&#34;artemis-plugin&#34;</span> <span style="color:#a6e22e">war=</span><span style="color:#e6db74">&#34;artemis-plugin.war&#34;</span><span style="color:#f92672">/&gt;</span>
       <span style="color:#f92672">&lt;app</span> <span style="color:#a6e22e">url=</span><span style="color:#e6db74">&#34;console&#34;</span> <span style="color:#a6e22e">war=</span><span style="color:#e6db74">&#34;console.war&#34;</span><span style="color:#f92672">/&gt;</span>
	   <span style="color:#f92672">&lt;app</span> <span style="color:#a6e22e">url=</span><span style="color:#e6db74">&#34;console&#34;</span> <span style="color:#a6e22e">war=</span><span style="color:#e6db74">&#34;activemq-rest.war&#34;</span><span style="color:#f92672">/&gt;</span><span style="color:#75715e">&lt;!--添加这一行即可--&gt;</span>
   <span style="color:#f92672">&lt;/web&gt;</span>
</code></pre></div><blockquote>
<p>重启activemq artemis</p>
</blockquote>

      </div></div>

  

  


<script src="https://utteranc.es/client.js"
        repo="ltanme/ltanme.github.io"
        issue-term="pathname"
        theme="github-dark-orange"
        crossorigin="anonymous"
        async>
</script>

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2023 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ltan.me/assets/main.js"></script>
<script src="https://ltan.me/assets/prism.js"></script>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-M6YN54PT6M"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-M6YN54PT6M');
</script>

  
</div>

</body>
</html>
