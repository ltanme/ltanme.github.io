<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Git Worktree on LTAN.ME</title>
    <link>https://ltan.me/tags/git-worktree/</link>
    <description>Recent content in Git Worktree on LTAN.ME</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 01 Dec 2025 10:00:00 +0800</lastBuildDate><atom:link href="https://ltan.me/tags/git-worktree/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>现代化 Vibe Coding &#43; Git Worktree：多分支并行开发 Java 项目的优雅姿势</title>
      <link>https://ltan.me/post/2025/12/git-worktree-parallel-dev-with-idea/</link>
      <pubDate>Mon, 01 Dec 2025 10:00:00 +0800</pubDate>
      
      <guid>https://ltan.me/post/2025/12/git-worktree-parallel-dev-with-idea/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;典型场景：一个 Java 单体或多模块项目，需要同时维护 &lt;code&gt;test&lt;/code&gt;、&lt;code&gt;pre&lt;/code&gt;、&lt;code&gt;prod&lt;/code&gt; 多套环境分支，还要临时开很多 feature 分支。&lt;br&gt;
传统做法要么频繁 &lt;code&gt;git checkout&lt;/code&gt; 切分支，要么干脆 clone 三四份仓库，既容易误操作，又浪费磁盘。&lt;br&gt;
本文介绍一种更现代化的组合：&lt;strong&gt;Git worktree + Vibe Coding Git 客户端 + IntelliJ IDEA&lt;/strong&gt;，在同一个仓库上优雅地做多分支并行开发。&lt;/p&gt;&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0-传统单工作区的痛点&#34;&gt;0. 传统单工作区的痛点&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://ltan.me/post/2025/12/git-worktree-parallel-dev-with-idea/show.jpg&#34; alt=&#34;show.jpg&#34;&gt;
日常开发中，我们经常同时维护：&lt;/p&gt;</description>
      <content>&lt;blockquote&gt;
&lt;p&gt;典型场景：一个 Java 单体或多模块项目，需要同时维护 &lt;code&gt;test&lt;/code&gt;、&lt;code&gt;pre&lt;/code&gt;、&lt;code&gt;prod&lt;/code&gt; 多套环境分支，还要临时开很多 feature 分支。&lt;br&gt;
传统做法要么频繁 &lt;code&gt;git checkout&lt;/code&gt; 切分支，要么干脆 clone 三四份仓库，既容易误操作，又浪费磁盘。&lt;br&gt;
本文介绍一种更现代化的组合：&lt;strong&gt;Git worktree + Vibe Coding Git 客户端 + IntelliJ IDEA&lt;/strong&gt;，在同一个仓库上优雅地做多分支并行开发。&lt;/p&gt;&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0-传统单工作区的痛点&#34;&gt;0. 传统单工作区的痛点&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://ltan.me/post/2025/12/git-worktree-parallel-dev-with-idea/show.jpg&#34; alt=&#34;show.jpg&#34;&gt;
日常开发中，我们经常同时维护：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;develop&lt;/code&gt; / &lt;code&gt;master&lt;/code&gt; / &lt;code&gt;release-*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;环境分支：&lt;code&gt;test&lt;/code&gt;、&lt;code&gt;pre&lt;/code&gt;、&lt;code&gt;prod&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;多个特性分支：&lt;code&gt;feature/xxx-1&lt;/code&gt;、&lt;code&gt;feature/xxx-2&lt;/code&gt;……&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果只用一个本地目录 + &lt;code&gt;git checkout&lt;/code&gt;，会遇到很多问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;频繁切分支&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;忘了 stash / commit，本地改动被带到了另一个分支；&lt;/li&gt;
&lt;li&gt;正在 debug test 分支，产品同事让你马上修一个 pre 的 bug，又得切回去。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;多 clone 占磁盘&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;为了并行开发，只能 &lt;code&gt;git clone&lt;/code&gt; 多份，&lt;code&gt;.git&lt;/code&gt; 目录重复占空间；&lt;/li&gt;
&lt;li&gt;同一个仓库更新要 &lt;code&gt;git pull&lt;/code&gt; N 次。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IDE 配置混乱&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;同一目录下的 &lt;code&gt;.idea&lt;/code&gt;、&lt;code&gt;run configuration&lt;/code&gt; 容易互相覆盖，尤其 Java 多模块项目时更烦。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些问题，本质都来自一个事实：&lt;strong&gt;工作目录和分支是强绑定关系&lt;/strong&gt;，一次只能服务一个分支。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-git-worktree一个仓库多套工作目录&#34;&gt;1. Git Worktree：一个仓库，多套工作目录&lt;/h2&gt;
&lt;p&gt;Git 官方早就给了更优解：&lt;code&gt;git worktree&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;简单理解：&lt;br&gt;
你只有&lt;strong&gt;一个真正的仓库（只有一份 .git）&lt;/strong&gt;，但可以为不同分支创建&lt;strong&gt;多个工作目录&lt;/strong&gt;，每个目录看起来就像一个独立 clone，好处是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.git&lt;/code&gt; 共享 → &lt;strong&gt;节省磁盘&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fetch&lt;/code&gt; 一次 → 所有工作区都能用&lt;/li&gt;
&lt;li&gt;各工作区的代码、IDE 配置互不影响&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;假设我们已经在 &lt;code&gt;~/Project/aim_main&lt;/code&gt; 下有主仓库：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/Project
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone git@gitlab.example.com:team/aim.git aim_main
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd aim_main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;现在我们希望：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;~/Project/aim_test&lt;/code&gt; → 对应 &lt;code&gt;test&lt;/code&gt; 分支&lt;/li&gt;
&lt;li&gt;&lt;code&gt;~/Project/aim_pre&lt;/code&gt;  → 对应 &lt;code&gt;pre&lt;/code&gt; 分支&lt;/li&gt;
&lt;li&gt;以后还要有一些临时 feature 工作树&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;11-为-test-分支创建一个-worktree&#34;&gt;1.1 为 test 分支创建一个 worktree&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/Project/aim_main
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 确保本地有 test 分支&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git fetch origin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git branch test origin/test
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 为 test 创建独立工作目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git worktree add ../aim_test test
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;目录结构大致变成：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;~/Project/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ├── aim_main   # 主仓库，默认分支比如 develop
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ├── aim_test   # worktree，绑定 test 分支
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  └── ...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;aim_test&lt;/code&gt; 目录看起来就像一个普通项目目录，可以单独用 Vibe Coding / IDEA 打开。&lt;/p&gt;
&lt;h3 id=&#34;12-为-pre-分支再来一个&#34;&gt;1.2 为 pre 分支再来一个&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/Project/aim_main
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git branch pre origin/pre
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git worktree add ../aim_pre pre
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;现在：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;~/Project/
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ├── aim_main   # develop
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ├── aim_test   # test
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  └── aim_pre    # pre
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;每个目录的代码互不影响，你可以在 &lt;code&gt;aim_test&lt;/code&gt; 里放心改动、提交、跑测试，同时 &lt;code&gt;aim_pre&lt;/code&gt; 也可以挂着一个不同版本在跑。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-搭配-vibe-coding直观管理多工作树和分支&#34;&gt;2. 搭配 Vibe Coding：直观管理多工作树和分支&lt;/h2&gt;
&lt;p&gt;Vibe Coding 这类 Git 客户端，对多仓库 / 多目录的支持通常都很好。结合 worktree，使用方式大致是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;把 &lt;code&gt;aim_test&lt;/code&gt; 当成一个独立项目打开；&lt;/li&gt;
&lt;li&gt;再把 &lt;code&gt;aim_pre&lt;/code&gt; 作为另一个项目打开；&lt;/li&gt;
&lt;li&gt;顶部 project 切换，可快速在多个环境之间切换视图。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种用法的好处：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;一眼看出自己正在操作哪个环境&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标题栏 / tab 上直接看到 &lt;code&gt;aim_test [test]&lt;/code&gt;、&lt;code&gt;aim_pre [pre]&lt;/code&gt; 这种视觉信息；&lt;/li&gt;
&lt;li&gt;减少 “在 pre 分支误改了 test 配置” 的概率。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Commit / Merge Request 视图更聚焦&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每个 worktree 的提交历史就是单一分支的历史；&lt;/li&gt;
&lt;li&gt;在 Vibe Coding 中直接从该目录发起 MR，减少误选分支、误选 target 的风险。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;结构视图清晰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;像 screenshot 中那样，一个项目窗格只对应一个目标分支；&lt;/li&gt;
&lt;li&gt;多模块 Java 项目也能用树状结构快速定位模块。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;换句话说，&lt;strong&gt;worktree 把“逻辑分支”的概念，在工具层面具体成了“不同的物理目录”&lt;/strong&gt;，而 Vibe Coding 则负责给这些目录提供更可视化的 Git 操作入口。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-搭配-intellij-ideajava-项目多环境并行调试&#34;&gt;3. 搭配 IntelliJ IDEA：Java 项目多环境并行调试&lt;/h2&gt;
&lt;p&gt;对 Java 项目来说，IDEA 是生产力核心。把 worktree + IDEA 结合起来，有几个非常现实的优势。&lt;/p&gt;
&lt;h3 id=&#34;31-每个分支一个-idea-project&#34;&gt;3.1 每个分支一个 IDEA Project&lt;/h3&gt;
&lt;p&gt;比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用 IDEA 打开 &lt;code&gt;~/Project/aim_test&lt;/code&gt; → 配置 test 环境的 Run/Debug 配置；&lt;/li&gt;
&lt;li&gt;再打开 &lt;code&gt;~/Project/aim_pre&lt;/code&gt; → 配置 pre 环境的 Run/Debug 配置。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这样：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;test、pre 两个环境&lt;strong&gt;可以同时起服务&lt;/strong&gt;，甚至绑定不同端口 / 不同 profile：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;aim_test&lt;/code&gt;：&lt;code&gt;--spring.profiles.active=test&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aim_pre&lt;/code&gt;：&lt;code&gt;--spring.profiles.active=pre&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;各自 &lt;code&gt;.idea&lt;/code&gt; 目录独立，Run Configuration 不会互相覆盖；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;不同分支的依赖变更（比如升级 Spring Boot 版本）也不会影响另一边的索引与缓存。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;32-多模块--微服务场景的体验&#34;&gt;3.2 多模块 / 微服务场景的体验&lt;/h3&gt;
&lt;p&gt;在一个多模块 / 微服务的 Java 仓库中（类似 screenshot 里的 &lt;code&gt;aim-gateway&lt;/code&gt;、&lt;code&gt;aim-model&lt;/code&gt;、&lt;code&gt;aim-service-*&lt;/code&gt;）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可以在 &lt;code&gt;aim_test&lt;/code&gt; 中专门配置与测试环境联调相关的模块；&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;aim_pre&lt;/code&gt; 中则配置预发场景使用的网关和核心服务；&lt;/li&gt;
&lt;li&gt;IDEA 的 &lt;code&gt;Maven&lt;/code&gt; / &lt;code&gt;Gradle&lt;/code&gt; 工具窗口都是基于当前目录的 &lt;code&gt;pom.xml&lt;/code&gt; / &lt;code&gt;build.gradle&lt;/code&gt;，不会混在一起。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;配合 IDEA 的 &lt;strong&gt;多窗口&lt;/strong&gt; 功能，你甚至可以：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;左边窗口是 &lt;code&gt;aim_test&lt;/code&gt; 的代码和日志；&lt;/li&gt;
&lt;li&gt;右边窗口是 &lt;code&gt;aim_pre&lt;/code&gt; 的代码和日志；&lt;/li&gt;
&lt;li&gt;中间再放一个 Vibe Coding 窗口看 MR 状态。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这比单目录反复切分支、重新导入项目不知道高到哪里去了。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;4-使用-worktree-的几个常用命令&#34;&gt;4. 使用 worktree 的几个常用命令&lt;/h2&gt;
&lt;h3 id=&#34;41-创建-feature-分支工作树&#34;&gt;4.1 创建 feature 分支工作树&lt;/h3&gt;
&lt;p&gt;从 &lt;code&gt;develop&lt;/code&gt; 拉一条特性分支，并给它单独一个目录：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/Project/aim_main
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git fetch origin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git worktree add ../aim_feature_x origin/develop -b feature/user-xxx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;完成开发和合并 MR 后，可以删掉这个工作树：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 删除工作树目录（不会删分支本身）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git worktree remove ../aim_feature_x
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 若分支已合并，可顺带删分支&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git branch -d feature/user-xxx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;42-查看当前所有-worktree&#34;&gt;4.2 查看当前所有 worktree&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd ~/Project/aim_main
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git worktree list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出类似：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/Users/you/Project/aim_main  abcdef1 [develop]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/Users/you/Project/aim_test  1234567 [test]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/Users/you/Project/aim_pre   89abcde [pre]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;很方便整体掌握当前本地有哪些“环境”。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;5-与多次-git-clone的对比&#34;&gt;5. 与“多次 git clone”的对比&lt;/h2&gt;
&lt;p&gt;很多同学会问：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“我之前就是 clone 三份目录，test / pre / prod 各一个，这跟 worktree 有什么本质区别？”&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;简单对比一下：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;方案&lt;/th&gt;
          &lt;th&gt;.git 是否多份&lt;/th&gt;
          &lt;th&gt;空间占用&lt;/th&gt;
          &lt;th&gt;fetch 更新&lt;/th&gt;
          &lt;th&gt;配置共享&lt;/th&gt;
          &lt;th&gt;清理成本&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;多次 &lt;code&gt;git clone&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;多份&lt;/td&gt;
          &lt;td&gt;大&lt;/td&gt;
          &lt;td&gt;每个目录都要拉&lt;/td&gt;
          &lt;td&gt;remote、hook 各自一套&lt;/td&gt;
          &lt;td&gt;要自己记得删&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;git worktree&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;只有主仓库一份&lt;/td&gt;
          &lt;td&gt;小（只多工作区文件）&lt;/td&gt;
          &lt;td&gt;主仓库拉一次，全局可用&lt;/td&gt;
          &lt;td&gt;统一 remote/hook/alias&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;git worktree remove&lt;/code&gt; 一条命令&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;从长期维护角度看：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;磁盘&lt;/strong&gt;：worktree 只多工作区里的源码和编译产物，&lt;code&gt;.git&lt;/code&gt; 只一份；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;一致性&lt;/strong&gt;：remote、hook、Git config 都是主仓库那一套，避免环境不一致；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;操作心智&lt;/strong&gt;：所有分支都“属于同一个仓库”，只是挂在不同工作树上。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;6-小结&#34;&gt;6. 小结&lt;/h2&gt;
&lt;p&gt;使用 &lt;strong&gt;Git worktree + Vibe Coding + IntelliJ IDEA&lt;/strong&gt; 做多分支并行开发，大致可以归纳为几个关键优势：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;目录级别区分环境&lt;/strong&gt;：test / pre / feature 分支各有独立工作目录，误操作概率极低。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;磁盘与网络友好&lt;/strong&gt;：只保留一份 &lt;code&gt;.git&lt;/code&gt;，fetch 一次，全局生效。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IDE 体验更好&lt;/strong&gt;：每个分支一个 IDEA Project；多环境可同时起服务、分别调试。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Git 可视化管理自然贴合&lt;/strong&gt;：Vibe Coding 中，一个窗口对应一个 worktree，commit / MR 视图清爽明了。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;扩展性强&lt;/strong&gt;：随时为某个紧急 hotfix 或 feature 新增一个临时工作树，用完即删。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果你现在还习惯在一个目录里疯狂 &lt;code&gt;git checkout&lt;/code&gt; 切分支，或者 clone 了三四份同一个仓库，不妨尝试一下这种组合。
通常只需要一两个迭代，你就会再也不想回到过去那种“切分支式开发”了。&lt;/p&gt;
</content>
    </item>
    
  </channel>
</rss>
